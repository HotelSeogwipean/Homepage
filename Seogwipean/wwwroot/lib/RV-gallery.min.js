class Gallery{constructor(i){Object.assign(this,{nav:["<span> < </span>","<span> > </span>"],close:"<span>X</span>",showNav:!0,showNavIfOneItem:!1,aspectRatio:"auto",showDots:!1,showDotsIfOneItem:!1,arrows:!1,fullScreen:!0,loop:!0,autoplay:!1,autoplayDelay:2e3,transition:"fade",transitionTime:500},i),this.itemCount=this.gallery.find("img").length,this.agi=0;let t=this;if(this.renderGallery(),jQuery(".g_s-img img").eq(0).on("load",function(){t.calcGalleryHeight()}),jQuery(window).on("load",function(){t.countMoveRight()}),jQuery(window).on("resize",function(){t.countMoveRight(),t.setLeftSmallImages(),t.calcGalleryHeight()}),jQuery(this.gallery).on("change",function(i,e){t.changeImg(e)}),jQuery(this.gallery).on("click",".g_s-img img",function(i){t.changeImg(i)}),jQuery(this.gallery).on("click",".prev",function(){t.changeImg("prev")}),jQuery(this.gallery).on("click",".next",function(){t.changeImg("next")}),this.fullScreen&&(jQuery(this.gallery).on("click",".g_img-cont",function(){t.showFullScreen()}),jQuery(this.gallery).on("click",".g_f-s-image",function(){t.closeFullScreen()})),jQuery(this.gallery).on("click",".dot",function(i){i.stopPropagation(),t.changeImg(parseInt(jQuery(this).attr("data-item")))}),jQuery(this.gallery).on("click",".big-arrows > *:first-child",function(i){i.stopPropagation(),t.changeImg("prev")}),jQuery(this.gallery).on("click",".big-arrows > *:last-child",function(i){i.stopPropagation(),t.changeImg("next")}),this.xDown=null,this.yDown=null,this.gallery.on("touchstart",function(i){t.xDown=i.originalEvent.touches[0].clientX,t.yDown=i.originalEvent.touches[0].clientY}),this.gallery.on("touchmove",function(i){t.handleTouchMove(i)}),this.autoplay){var e=setInterval(function(){t.changeImg("next")},t.autoplayDelay);this.gallery.on("mouseenter",function(){clearInterval(e)}),this.gallery.on("mouseleave",function(){e=setInterval(function(){t.changeImg("next")},t.autoplayDelay)})}}calcGalleryHeight(){var i=this.gallery.find(".g_img-cont").width();"auto"!=this.aspectRatio&&jQuery.isNumeric(this.aspectRatio)&&this.gallery.find(".g_img-cont").css("height",i/this.aspectRatio)}countMoveRight(){if(this.itemCount>1){this.g_navDivWidth=this.gallery.find(".g_nav")[0].clientWidth,this.fullSmallWidth=0,this.item=0;for(var i=0;i<this.itemCount;i++)this.item=this.gallery.find(".g_s-img").get(i).clientWidth,this.fullSmallWidth+=this.item+parseInt(this.gallery.find(".g_s-img").css("marginRight"))+parseInt(this.gallery.find(".g_s-img").css("marginLeft"));this.moveRight=(this.fullSmallWidth-this.g_navDivWidth)/(this.gallery.find(".g_s-img").length-1)}}setLeftSmallImages(){this.gallery.find(".g_s-img").css("left","-"+this.agi*this.moveRight+"px")}loadActiveImg(i){let t=this;t.bigImageSrc=t.gallery.find(".g_s-img img").eq(t.agi).attr("src"),this.gallery.find(".agi").removeClass("agi"),i&&i(t),t.gallery.find(".g_s-img").eq(t.agi).addClass("agi"),"fade"==this.transition?("#"!==t.gallery.find(".g_m-img").attr("src")&&(t.gallery.find(".g_img-cont .g_m-img").not(".cloned").clone().appendTo(t.gallery.find(".g_img-cont .g_m-img").parent()).css({position:"absolute",height:"100%",width:"100%"}).addClass("cloned"),t.gallery.find(".g_f-s .g_m-img").not(".cloned").clone().appendTo(t.gallery.find(".g_f-s .g_m-img").parent()).css({position:"absolute"}).addClass("cloned")),t.gallery.find(".g_m-img").not(".cloned").attr("src",t.bigImageSrc).hide().fadeIn(t.transitionTime/2),t.gallery.find(".g_m-img.cloned").fadeOut(t.transitionTime,function(){jQuery(this).remove()})):"slide"==this.transition&&t.slideDirection?(t.gallery.find(".g_img-cont .g_m-img").not(".cloned").clone().appendTo(t.gallery.find(".g_img-cont .g_m-img").parent()).css({position:"absolute",height:"100%",width:"100%"}).addClass("cloned"),t.gallery.find(".g_f-s .g_m-img").not(".cloned").clone().appendTo(t.gallery.find(".g_f-s .g_m-img").parent()).css({position:"absolute"}).addClass("cloned"),"left"===this.slideDirection?(t.gallery.find(".g_m-img").not(".cloned").css({left:"100%"}).attr("src",t.bigImageSrc),t.gallery.find(".g_m-img").not(".cloned").animate({left:"0"},t.transitionTime),t.gallery.find(".g_m-img.cloned").animate({left:"-100%"},t.transitionTime,function(){jQuery(this).remove()})):(t.gallery.find(".g_m-img").not(".cloned").css({left:"-100%"}).attr("src",t.bigImageSrc),t.gallery.find(".g_m-img").not(".cloned").css({left:"-100%"}).attr("src",t.bigImageSrc),t.gallery.find(".g_m-img").not(".cloned").animate({left:"0"},t.transitionTime),t.gallery.find(".g_m-img.cloned").animate({left:"100%"},t.transitionTime,function(){jQuery(this).remove()}))):t.gallery.find(".g_m-img").not(".cloned").attr("src",t.bigImageSrc),t.gallery.find(".dot").removeClass("dot-active"),t.gallery.find(".dot[data-item='"+t.agi+"']").addClass("dot-active")}changeImg(i){this.changed=!1,this.itemCount>1&&("prev"===i?(this.agi>0?(this.agi--,this.changed=!0):0===this.agi&&this.loop&&(this.agi=this.gallery.find(".g_s-img").length-1),"slide"===this.transition&&(this.slideDirection="left")):"next"===i?(this.agi<this.gallery.find(".g_s-img").length-1?(this.agi++,this.changed=!0):this.agi===this.gallery.find(".g_s-img").length-1&&this.loop&&(this.agi=0),"slide"===this.transition&&(this.slideDirection="right")):"number"==typeof i?i>=0&&i<this.itemCount&&(i>this.agi&&"slide"===this.transition?this.slideDirection="right":this.slideDirection="left",this.changed=!0,this.agi=i):(this.images=jQuery.map(this.gallery.find(".g_s-img img"),function(i){return i.src}),this.imgsrc=jQuery(i.target)[0].src,this.changed=!0,this.images.indexOf(this.imgsrc)>this.agi&&"slide"===this.transition?this.slideDirection="right":this.slideDirection="left",this.agi=this.images.indexOf(this.imgsrc)),(this.changed||this.loop)&&(this.loadActiveImg(),this.setLeftSmallImages()))}showFullScreen(){this.gallery.css("z-index","99999"),this.gallery.find(".g_f-s-hidden").fadeIn(400)}closeFullScreen(){this.gallery.find(".g_f-s-hidden").fadeOut(400,function(){this.gallery.removeAttr("style")}.bind(this))}renderGallery(){if(this.gallery.find("img").wrap('<div class="g_s-img"></div>'),this.gallery.find(".g_s-img").wrapAll('<div class="g_nav" />'),this.gallery.children().wrapAll('<div class="g_nav-cont" />'),jQuery('<div class="arrow-div prev">\n                      '+this.nav[0]+"\n                  </div>").prependTo(this.gallery.find(".g_nav-cont")),this.showNav||this.gallery.find(".g_nav-cont").hide(),jQuery('<div class="arrow-div next">\n                      '+this.nav[1]+"\n                  </div>").appendTo(this.gallery.find(".g_nav-cont")),jQuery('<div class="g_img-cont">\n                  <div class="g_b-img">\n                      <img class="g_m-img" src="#">\n                  </div>\n              </div>').appendTo(this.gallery),this.arrows&&this.itemCount>1&&jQuery('<div class="big-arrows"><div>'+this.nav[0]+"</div><div>"+this.nav[1]+"</div></div>").appendTo(this.gallery.find(".g_img-cont")),this.showDots&&this.itemCount>1||this.showDotsIfOneItem){jQuery('<div class="dots"></div>').appendTo(this.gallery.find(".g_img-cont"));for(let i=0;i<this.itemCount;i++)jQuery('<div class="dot" data-item="'+i+'"></div>').appendTo(this.gallery.find(".dots"))}this.gallery.children().wrapAll('<div class="gallery-row" />'),this.fullScreen?jQuery('<div class="g_f-s-hidden">\n                      <div class="g_f-s">\n                          <div class="g_f-s-arrow g_f-s-arrow-left prev">\n                             '+this.nav[0]+'\n                          </div>\n                          <div class="g_f-s-image">\n                              <img class="g_m-img" src="#">\n                              <div class="close-button">'+this.close+'</div>\n                          </div>\n                          <div class="g_f-s-arrow g_f-s-arrow-right next">\n                             '+this.nav[1]+"\n                          </div>\n                      </div>\n                  </div>").appendTo(this.gallery):this.gallery.find(".g_img-cont").css("cursor","auto"),this.loadActiveImg(function(i){i.itemCount<2&&!i.showNavIfOneItem&&i.gallery.find(".g_nav-cont, .g_f-s-arrow").remove()})}handleTouchMove(i){if(this.xDown&&this.yDown){var t=i.originalEvent.touches[0].clientX,e=i.originalEvent.touches[0].clientY;this.xDiff=this.xDown-t,this.yDiff=this.yDown-e,Math.abs(this.xDiff)>Math.abs(this.yDiff)&&(this.xDiff>0?this.changeImg("prev"):this.changeImg("next")),this.xDown=null,this.yDown=null}}}jQuery.fn.initGallery=function(i){i||(i={});var t=[];for(let e=0;e<this.length;e++)i.gallery=this.eq(e),t[e]=new Gallery(i)};